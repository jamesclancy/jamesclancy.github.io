<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      James Clancy &middot; This needs to be reorganized in the future.
    
  </title>

  
  <link rel="canonical" href="/page9/">
  

  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6FZ90LRCT8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6FZ90LRCT8');
    </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Largely a mess of content. The idea is to generate content then refine sometime in the future.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item active" href="/">Home</a>
    








  
  
  

  
    

    

    
    

        

        
        <a class="sidebar-nav-item" href="/categories/bookreviews/">
          BookReviews
          (<span class="text-muted small font-weight-light">
              77
              
          </span>)
        </a>

        <!-- content count -->


    


    

  

  
  
  

  
    

    

    
    

        

        
        <a class="sidebar-nav-item" href="/categories/general/">
          General
          (<span class="text-muted small font-weight-light">
              2
              
          </span>)
        </a>

        <!-- content count -->


    


    

  

  
  
  

  

  
  
  

  
    

    

    
    

        

        
        <a class="sidebar-nav-item" href="/categories/projects/">
          Projects
          (<span class="text-muted small font-weight-light">
              38
              
          </span>)
        </a>

        <!-- content count -->


    
        
          
          
          <a class="sidebar-nav-item" 
              href="/categories/kafkaui/" style="padding-left:60px;">KafkaUI (<span class="text-muted small font-weight-light">
                1
                
              </span>)</a>

          
        
          
          
          <a class="sidebar-nav-item" 
              href="/categories/safecardgame/" style="padding-left:60px;">SafeCardGame (<span class="text-muted small font-weight-light">
                17
                
              </span>)</a>

          
        
          
          
          <a class="sidebar-nav-item" 
              href="/categories/wilkensavenue/" style="padding-left:60px;">WilkensAvenue (<span class="text-muted small font-weight-light">
                20
                
              </span>)</a>

          
        
    


    

  

  
  
  

  
    

    

    
    

        

        
        <a class="sidebar-nav-item" href="/categories/recipes/">
          Recipes
          (<span class="text-muted small font-weight-light">
              16
              
          </span>)
        </a>

        <!-- content count -->


    


    

  

  
  
  

  

  
  
  

  




  </nav>


<div class="sidebar-item">
  <p>
<a href="/about">About</a> | 
<a href="https://github.com/jamesclancy" aria-label="github" target="_blank" rel="noopener"> 
  <i class="fab fa-github-alt"></i> Github </a> | 
<a href="/feed.xml" aria-label="rss"> <i class="fas fa-rss"></i> RSS </a>
    </p>
    <p>
      &copy; 2022. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">James Clancy</a>
            <small>This needs to be reorganized in the future.</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/projects/wilkensavenue/2021/08/30/WilkensAvenueStep13Dependabot/">
        Wilkens Avenue - Step 13 - Add Dependabot
      </a>
    </h1>

    <span class="post-date">30 Aug 2021</span>

    <h2 id="goals-of-this-step">Goals of this Step</h2>
<ul>
  <li>Add Dependabot configuration to the repository</li>
  <li>Evaluate the Dependabot results.</li>
</ul>

<h2 id="process">Process</h2>

<p>Dependabot is a free Github action which scans projects for old dependencies and created pull requests for upgrades to the dependencies.</p>

<p>I created a basic dependabot.yml file based on the template in the .github folder of the repository. I am not certain how well this will work with Packet/F# but I figured I would see what happens.</p>

<p>the file looked like</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: 2
updates:
  - package-ecosystem: "npm" # See documentation for possible values
    directory: "/" # Location of package manifests
    schedule:
      interval: "daily"
  - package-ecosystem: "nuget" # See documentation for possible values
    directory: "/" # Location of package manifests
    schedule:
      interval: "daily"
  - package-ecosystem: "docker" # See documentation for possible values
    directory: "/" # Location of package manifests
    schedule:
      interval: "daily"
  - package-ecosystem: "github-actions"
    # Workflow files stored in the
    # default location of `.github/workflows`
    directory: "/"
    schedule:
      interval: "daily"
</code></pre></div></div>

<p>One thing that is strange with the results. For nuget, it appears results are generated for all projects in the solution but they are grouped under the name <code class="language-plaintext highlighter-rouge">Build.fsproj</code>.</p>

<p><img src="\assets\img\post-media\2021-08-30-WilkensAvenueStep13Dependabot\DependabotResultsScreenshot.png" alt="Dependabot Build .fsproj Screenshot" /></p>

<h2 id="results">Results</h2>

<p>Dependabot found 5 Javascript issues. I merged two which appeared to be very safe. I will have to evaluate if the others are alright to do in the future.</p>

<p><a href="https://github.com/jamesclancy/WilkensAvenue/tree/step-13">Git branch for this step</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/recipes/2021/08/29/DragonFruitSuccotash/">
        Dragonfruit Succotash
      </a>
    </h1>

    <span class="post-date">29 Aug 2021</span>

    <p>Dragonfruit Succotash</p>

<h2 id="ingredients">Ingredients</h2>

<ul>
  <li>1 dragon fruit</li>
  <li>1 can chickpeas drained</li>
  <li>1 can no salt added sweet corn</li>
  <li>1 diced plum tomato</li>
  <li>3 diced green plums</li>
  <li>1 teaspoon garlic powder</li>
  <li>1 teaspoon onion powder</li>
  <li>1/2 teaspoon mushroom extract</li>
</ul>

<h2 id="yield">Yield</h2>

<p>~ 4 servings</p>

<h2 id="process">Process</h2>

<ol>
  <li>Clean dragon fruit, cut in half. Using a spoon remove the meat in large chunks. Then dice the large chunks. Make sure to save all the juice that inevitably come out.</li>
  <li>Mix all the ingredients together</li>
  <li>Chill in teh refrigerator until ready to serve</li>
</ol>

<h2 id="results">Results</h2>

<p>8/10 - This is way better then normal triple succotash. This is surprisingly delicious and complementary while not being overly sweet. I ate some on a salad and it was one of the better <code class="language-plaintext highlighter-rouge">salad topping</code>.</p>

<p>The reason I am giving this an 8 is the level of saltiness. This could probably be reduced by removing the mushroom extract and using fresh or sodium free canned chickpeas. I do think the mushroom extract is an important part contributor of umami in this dish. I am not certain how adding more tomatoes would play into the dish and I would think that would be the safest way to pump up the umami if the mushroom extract is removed.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/projects/wilkensavenue/2021/08/29/WilkensAvenueStep12WireUpBrowsePart2/">
        Wilkens Avenue - Step 12 - Wire up Browse Page - Part 2 Send back events
      </a>
    </h1>

    <span class="post-date">29 Aug 2021</span>

    <h2 id="goals-of-this-step">Goals of this Step</h2>
<ul>
  <li>Browse Page view dispatches events when filters are changed</li>
  <li>Client researches for updates from the API when filter change events occur</li>
</ul>

<h2 id="process">Process</h2>

<p>I created a new module <code class="language-plaintext highlighter-rouge">Shared.StaticData</code> which contains some static lists for possible tags, categories and neighborhoods.</p>

<p>I added <code class="language-plaintext highlighter-rouge">onClick</code> hooks to the various left menu inputs. Each of these hooks modifies the passed BrowseMenuFilter to reflect the changed value and packages it up to resend to the event loop.</p>

<p>Lastly, I added Next and Previous buttons to the bottom of the search results.</p>

<p>After going through this process I noticed a few issues. The InputTags (despite having case sensitivity off) was still being case sensitive. I added a relatively hacky implementation to force the filter to not be case sensitive.</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="n">tagsInput</span><span class="p">.</span><span class="n">autoCompleteSource</span> <span class="p">(</span>
                          <span class="p">(</span><span class="k">fun</span> <span class="n">text</span> <span class="p">-&gt;</span>
                              <span class="n">async</span> <span class="p">{</span>
                                  <span class="k">let</span> <span class="n">lowerCaseText</span> <span class="p">=</span> <span class="n">text</span><span class="p">.</span><span class="nc">ToString</span><span class="bp">()</span><span class="p">.</span><span class="nc">ToLower</span><span class="bp">()</span>

                                  <span class="k">return</span>
                                      <span class="n">possibleValues</span>
                                      <span class="p">|&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">filter</span> <span class="p">(</span><span class="k">fun</span> <span class="n">x</span> <span class="p">-&gt;</span> <span class="n">x</span><span class="p">.</span><span class="nc">ToString</span><span class="bp">()</span><span class="p">.</span><span class="nc">ToLower</span><span class="bp">()</span><span class="p">.</span><span class="nc">Contains</span><span class="p">(</span><span class="n">lowerCaseText</span><span class="o">))</span>
                              <span class="o">})</span>
                      <span class="p">)</span></code></pre></figure>

<p>Also, my results page was not displaying the correct number of results so I has to update the view like:</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">let</span> <span class="n">displaySearchResults</span> <span class="p">(</span><span class="n">browseViewModel</span> <span class="p">:</span> <span class="nc">BrowsePageModel</span><span class="p">)</span> <span class="p">(</span><span class="n">dispatch</span><span class="p">:</span> <span class="nc">Msg</span> <span class="p">-&gt;</span> <span class="kt">unit</span><span class="p">)</span> <span class="p">=</span>
    <span class="k">let</span> <span class="n">menuDispatch</span> <span class="n">menuBrowse</span> <span class="p">=</span>
        <span class="n">menuBrowse</span> <span class="p">|&gt;</span> <span class="nc">BrowsePageFilterChanged</span> <span class="p">|&gt;</span> <span class="n">dispatch</span>
    <span class="k">let</span> <span class="n">locations</span> <span class="p">=</span> <span class="n">browseViewModel</span><span class="p">.</span><span class="nc">Results</span>
    <span class="k">match</span> <span class="n">locations</span> <span class="k">with</span>
    <span class="p">|</span> <span class="nc">None</span>
    <span class="p">|</span> <span class="nc">Some</span> <span class="bp">[]</span> <span class="p">-&gt;</span> <span class="p">[</span> <span class="nn">Html</span><span class="p">.</span><span class="n">div</span> <span class="p">[</span> <span class="n">prop</span><span class="p">.</span><span class="n">children</span> <span class="p">[</span> <span class="nn">Html</span><span class="p">.</span><span class="n">b</span> <span class="p">[</span> <span class="n">prop</span><span class="p">.</span><span class="n">text</span> <span class="s2">"nothing found"</span> <span class="p">]</span> <span class="p">]</span> <span class="p">]</span> <span class="p">]</span>
    <span class="p">|</span> <span class="nc">Some</span> <span class="n">items</span> <span class="p">-&gt;</span>
        <span class="p">[</span> <span class="nn">Html</span><span class="p">.</span><span class="n">div</span> <span class="p">[</span> <span class="n">prop</span><span class="p">.</span><span class="n">children</span> <span class="p">[</span> <span class="nn">Html</span><span class="p">.</span><span class="n">b</span> <span class="p">[</span> <span class="n">prop</span><span class="p">.</span><span class="n">text</span> <span class="p">(</span><span class="n">sprintf</span> <span class="s2">"A total of %i results found. You are on page %i of %i"</span>  <span class="n">browseViewModel</span><span class="p">.</span><span class="nn">Filter</span><span class="p">.</span><span class="nc">TotalResults</span> <span class="n">browseViewModel</span><span class="p">.</span><span class="nn">Filter</span><span class="p">.</span><span class="nc">CurrentPage</span> <span class="n">browseViewModel</span><span class="p">.</span><span class="nn">Filter</span><span class="p">.</span><span class="nc">TotalPages</span><span class="p">)</span>  <span class="p">]</span> <span class="p">]</span> <span class="p">]</span>
          <span class="nn">Bulma</span><span class="p">.</span><span class="n">container</span> <span class="p">[</span> <span class="n">container</span><span class="p">.</span><span class="n">isFluid</span>
  </code></pre></figure>

<h2 id="results">Results</h2>

<p>Currently, the page can be viewed <a href="https://wilkens-avenue.herokuapp.com/#/browse/12312">here</a>.</p>

<p><a href="https://github.com/jamesclancy/WilkensAvenue/tree/step-12">Git branch for this step</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/projects/wilkensavenue/2021/08/29/WilkensAvenueStep11RemoveMoreOfTheSafeStackTemplateTodos/">
        Wilkens Avenue - Step 11 - Remove more of the SafeStack Template Generated Stuff
      </a>
    </h1>

    <span class="post-date">29 Aug 2021</span>

    <h2 id="goals-of-this-step">Goals of this Step</h2>
<ul>
  <li>Remove the ToDo references throughout the project.</li>
</ul>

<h2 id="process">Process</h2>

<p>When I generated the template application it included a good amount of boilerplate stuff which references a generic <code class="language-plaintext highlighter-rouge">ToDo</code> application that was included in the template. I initially left most of these their but it has grown annoying to work with. I would like to remove as many references to them as I can find throughout the project to help clean it up. I wanted this to be a different step so it it wouldn’t muddy up any additional PR diffs.</p>

<h2 id="results">Results</h2>

<p><a href="https://github.com/jamesclancy/WilkensAvenue/tree/step-11">Git branch for this step</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/projects/wilkensavenue/2021/08/28/WilkensAvenueStep10WireUpBrowsePart1/">
        Wilkens Avenue - Step 10 - Wire up Browse Page - Part 1 Read
      </a>
    </h1>

    <span class="post-date">28 Aug 2021</span>

    <h2 id="goals-of-this-step">Goals of this Step</h2>
<ul>
  <li>Browse Page view model includes all data to render the page</li>
  <li>Browse page receives model from update and inturn api and renders the page</li>
</ul>

<h2 id="process">Process</h2>

<p>For now I am going to move on from the tags input issue and come back to it later. I think I have identified some possible solutions but I think I am using to new a version of webpack to utilize them.</p>

<p>This required the implementation of a new API endpoint, several mappings between <code class="language-plaintext highlighter-rouge">DataTransferFormats</code>, modifications to the page views to pass through the values, updates to the url router to fire off the API call as well as a new Msg type to handle completed search requests.</p>

<h3 id="new-api-endpoint">New Api Endpoint</h3>

<p>In <code class="language-plaintext highlighter-rouge">Shared</code></p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">type</span> <span class="nc">ILocationInformationApi</span> <span class="p">=</span>
    <span class="p">{</span> <span class="n">getLocation</span><span class="p">:</span> <span class="kt">string</span> <span class="p">-&gt;</span> <span class="nc">Async</span><span class="p">&lt;</span><span class="nc">LocationDetailModel</span><span class="p">&gt;</span>
      <span class="n">searchLocations</span><span class="p">:</span> <span class="nc">LocationSearchRequest</span> <span class="p">-&gt;</span> <span class="nc">Async</span><span class="p">&lt;</span><span class="nc">LocationSearchResult</span><span class="p">&gt;</span> <span class="p">}</span></code></pre></figure>

<p>In the <code class="language-plaintext highlighter-rouge">Server</code> implementation</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">let</span> <span class="n">locationInformationApi</span> <span class="p">=</span>
    <span class="p">{</span> <span class="n">getLocation</span> <span class="p">=</span> <span class="k">fun</span> <span class="n">id</span> <span class="p">-&gt;</span> <span class="n">async</span> <span class="p">{</span> <span class="k">return</span> <span class="n">exampleLocation</span> <span class="p">}</span>
      <span class="n">searchLocations</span> <span class="p">=</span>
          <span class="k">fun</span> <span class="n">req</span> <span class="p">-&gt;</span>
              <span class="n">async</span> <span class="p">{</span>
                  <span class="k">return</span>
                      <span class="p">{</span> <span class="nc">SearchRequest</span> <span class="p">=</span> <span class="n">req</span>
                        <span class="nc">TotalResults</span> <span class="p">=</span> <span class="mi">50</span>
                        <span class="nc">TotalPages</span> <span class="p">=</span> <span class="mi">1</span>
                        <span class="nc">CurrentPage</span> <span class="p">=</span> <span class="mi">1</span>
                        <span class="nc">Results</span> <span class="p">=</span> <span class="nc">Some</span><span class="p">(</span><span class="nn">List</span><span class="p">.</span><span class="n">ofSeq</span> <span class="n">generateABunchOfItems</span><span class="p">)</span> <span class="p">}</span>
              <span class="p">}</span> <span class="p">}</span></code></pre></figure>

<h3 id="datatransferformat-mappings">DataTransferFormat Mappings</h3>

<p>To the Client <code class="language-plaintext highlighter-rouge">Index</code> (a poor location but it works for now) I added:</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">let</span> <span class="n">mapLocationSearchRequestToBrowseFilterModel</span> <span class="p">(</span><span class="n">locationSearchResult</span><span class="p">:</span> <span class="nc">LocationSearchRequest</span><span class="p">)</span> <span class="n">totalPages</span> <span class="n">totalResults</span> <span class="p">:</span> <span class="nc">BrowseFilterModel</span> <span class="p">=</span>
    <span class="k">let</span> <span class="n">searchFilter</span> <span class="p">=</span>
        <span class="k">match</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">Query</span> <span class="k">with</span>
        <span class="p">|</span> <span class="n">s</span> <span class="k">when</span> <span class="nn">System</span><span class="p">.</span><span class="nn">String</span><span class="p">.</span><span class="nc">IsNullOrWhiteSpace</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nc">None</span>
        <span class="p">|</span> <span class="n">s</span> <span class="p">-&gt;</span> <span class="nc">Some</span> <span class="n">s</span>

    <span class="p">{</span>
      <span class="nc">TotalResults</span> <span class="p">=</span> <span class="n">totalResults</span>
      <span class="nc">TotalPages</span> <span class="p">=</span> <span class="n">totalPages</span>
      <span class="nc">CurrentPage</span> <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">CurrentPage</span>
      <span class="nc">SearchFilter</span> <span class="p">=</span> <span class="n">searchFilter</span>
      <span class="nc">ResultsPerPage</span> <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">ItemsPerPage</span>
      <span class="nc">OnlyFree</span> <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">FilterToFree</span>
      <span class="nc">OnlyOpenAir</span> <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">FilterToOpenAir</span>
      <span class="nc">OnlyPrivate</span> <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">FilterToPrivate</span>
      <span class="nc">FilterToZipCode</span> <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nn">DistanceFilter</span><span class="p">.</span><span class="nc">IsSome</span>
      <span class="nc">DistanceToFilterTo</span> <span class="p">=</span>
          <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">DistanceFilter</span>
          <span class="p">|&gt;</span> <span class="nn">Option</span><span class="p">.</span><span class="n">map</span> <span class="p">(</span><span class="k">fun</span> <span class="n">x</span> <span class="p">-&gt;</span> <span class="n">x</span><span class="p">.</span><span class="nc">OriginZipCode</span><span class="p">)</span> 
          <span class="p">|&gt;</span> <span class="nn">Option</span><span class="p">.</span><span class="n">fold</span> <span class="p">(</span><span class="k">fun</span> <span class="n">x</span> <span class="n">y</span> <span class="p">-&gt;</span> <span class="n">x</span> <span class="p">)</span> <span class="s2">""</span>
      <span class="nc">ZipCodeToFilterTo</span> <span class="p">=</span>
          <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">DistanceFilter</span>
          <span class="p">|&gt;</span> <span class="nn">Option</span><span class="p">.</span><span class="n">map</span> <span class="p">(</span><span class="k">fun</span> <span class="n">x</span> <span class="p">-&gt;</span> <span class="n">x</span><span class="p">.</span><span class="nn">MaxDistance</span><span class="p">.</span><span class="nc">ToString</span><span class="bp">()</span><span class="p">)</span> 
          <span class="p">|&gt;</span> <span class="nn">Option</span><span class="p">.</span><span class="n">fold</span> <span class="p">(</span><span class="k">fun</span> <span class="n">x</span> <span class="n">y</span> <span class="p">-&gt;</span> <span class="n">x</span> <span class="p">)</span> <span class="s2">""</span>

      <span class="nc">AvailableTags</span> <span class="p">=</span> <span class="p">[</span> <span class="s2">"B&amp;O"</span><span class="p">;</span> <span class="s2">"Railroad"</span> <span class="p">]</span>
      <span class="nc">AvailableCategories</span> <span class="p">=</span> <span class="p">[</span> <span class="s2">"Steel"</span><span class="p">;</span> <span class="s2">"Port"</span><span class="p">;</span> <span class="s2">"Colonial"</span> <span class="p">]</span>
      <span class="nc">AvailableNeighborhoods</span> <span class="p">=</span>
          <span class="p">[</span> <span class="s2">"Pigtown"</span>
            <span class="s2">"Mt Clare"</span>
            <span class="s2">"Pratt Monroe"</span>
            <span class="s2">"Carrolltown Ridge"</span> <span class="p">]</span>


      <span class="nc">SelectedTags</span> <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">TagFilterFilter</span>
      <span class="nc">SelectedCategories</span> <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">CategoryFilter</span>
      <span class="nc">SelectedNeighborhoods</span> <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">NeighborhoodFilter</span> <span class="p">}</span>

<span class="k">let</span> <span class="n">mapBrowseFilterModelToLocationSearchRequest</span> <span class="p">(</span><span class="n">locationSearchResult</span><span class="p">:</span>  <span class="nc">BrowseFilterModel</span><span class="p">)</span> <span class="p">:</span> <span class="nc">LocationSearchRequest</span> <span class="p">=</span>

    <span class="k">let</span> <span class="n">decimalFromString</span> <span class="p">(</span><span class="n">s</span> <span class="p">:</span> <span class="kt">string</span><span class="p">)</span> <span class="p">=</span>
        <span class="k">match</span> <span class="nn">System</span><span class="p">.</span><span class="nn">Decimal</span><span class="p">.</span><span class="nc">TryParse</span> <span class="n">s</span> <span class="k">with</span>
        <span class="p">|</span> <span class="p">(</span><span class="bp">true</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">value</span>
        <span class="p">|</span> <span class="o">(_,</span> <span class="o">_)</span> <span class="p">-&gt;</span> <span class="mi">15</span><span class="p">.</span><span class="mi">0</span><span class="n">m</span>

    <span class="k">let</span> <span class="n">searchFilter</span> <span class="p">=</span>
        <span class="k">match</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">SearchFilter</span> <span class="k">with</span>
        <span class="p">|</span> <span class="nc">None</span> <span class="p">-&gt;</span> <span class="s2">""</span>
        <span class="p">|</span> <span class="nc">Some</span> <span class="n">s</span> <span class="p">-&gt;</span> <span class="n">s</span>

    <span class="k">let</span> <span class="n">filterToDistance</span> <span class="p">:</span> <span class="nc">LocationDistanceFilter</span> <span class="n">option</span> <span class="p">=</span>
      <span class="k">match</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">FilterToZipCode</span> <span class="k">with</span>
        <span class="p">|</span> <span class="bp">true</span> <span class="p">-&gt;</span> <span class="nc">Some</span> <span class="p">{</span> <span class="nc">MaxDistance</span> <span class="p">=</span> <span class="n">decimalFromString</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">DistanceToFilterTo</span>
                         <span class="nc">OriginZipCode</span> <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">ZipCodeToFilterTo</span>
                         <span class="nc">MilesFromZipCode</span> <span class="p">=</span> <span class="mi">0</span><span class="n">m</span><span class="p">}</span>
        <span class="p">|</span> <span class="bp">false</span> <span class="p">-&gt;</span> <span class="nc">None</span>


    <span class="p">{</span> <span class="nc">Query</span> <span class="p">=</span> <span class="n">searchFilter</span>
      <span class="nc">FilterToFree</span> <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">OnlyFree</span>
      <span class="nc">FilterToOpenAir</span> <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">OnlyOpenAir</span>
      <span class="nc">FilterToPrivate</span>  <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">OnlyPrivate</span>
      <span class="nc">DistanceFilter</span> <span class="p">=</span> <span class="n">filterToDistance</span>

      <span class="nc">TagFilterFilter</span> <span class="p">=</span>  <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">SelectedTags</span>
      <span class="nc">CategoryFilter</span>  <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">SelectedCategories</span>
      <span class="nc">NeighborhoodFilter</span>  <span class="p">=</span> <span class="n">locationSearchResult</span><span class="p">.</span><span class="nc">SelectedNeighborhoods</span>
      <span class="nc">CurrentPage</span> <span class="p">=</span> <span class="mi">1</span>
      <span class="nc">ItemsPerPage</span> <span class="p">=</span> <span class="mi">50</span><span class="p">}</span>

<span class="k">let</span> <span class="n">mapBrowsePageFilterChangeToLocationSearchRequsst</span> <span class="p">(</span><span class="n">change</span><span class="p">:</span> <span class="nc">BrowsePageFilterChange</span><span class="p">)</span> <span class="p">=</span>
    <span class="k">match</span> <span class="n">change</span> <span class="k">with</span>
    <span class="p">|</span> <span class="nc">FilterChanged</span> <span class="n">b</span> <span class="p">-&gt;</span><span class="n">mapBrowseFilterModelToLocationSearchRequest</span> <span class="n">b</span>
    <span class="p">|</span> <span class="nc">LoadNextPage</span>  <span class="n">b</span> <span class="p">-&gt;</span><span class="n">mapBrowseFilterModelToLocationSearchRequest</span> <span class="n">b</span>
    <span class="p">|</span> <span class="nc">LoadPreviousPage</span>  <span class="n">b</span> <span class="p">-&gt;</span><span class="n">mapBrowseFilterModelToLocationSearchRequest</span> <span class="n">b</span>

<span class="k">let</span> <span class="n">mapSearchResultToReceievedBrowsePageResult</span> <span class="p">(</span><span class="n">searchResult</span><span class="p">:</span> <span class="nc">LocationSearchResult</span><span class="p">)</span> <span class="p">:</span> <span class="nc">Msg</span> <span class="p">=</span>
    <span class="p">{</span> <span class="nc">Filter</span> <span class="p">=</span> <span class="n">mapLocationSearchRequestToBrowseFilterModel</span> <span class="p">(</span><span class="n">searchResult</span><span class="p">.</span><span class="nc">SearchRequest</span><span class="p">)</span>  <span class="n">searchResult</span><span class="p">.</span><span class="nc">TotalPages</span> <span class="n">searchResult</span><span class="p">.</span><span class="nc">TotalResults</span>
      <span class="nc">Results</span> <span class="p">=</span> <span class="n">searchResult</span><span class="p">.</span><span class="nc">Results</span>
    <span class="p">}</span>
    <span class="p">|&gt;</span> <span class="nc">ReceivedBrowsePageResult</span></code></pre></figure>

<h3 id="page-view-modifications">Page View Modifications</h3>

<p>A number of of the changes were made to the BrowseLocationsView. The main changes resolved around passing models into the various function calls and using the values from the model to populate the view.</p>

<h3 id="updates-to-url-router">Updates to URL Router</h3>

<h3 id="new-msg-type--handler">New Msg Type &amp; Handler</h3>

<p>To the Client <code class="language-plaintext highlighter-rouge">Contracts</code> I added a new type of</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">type</span> <span class="nc">BrowsePageFilterChange</span> <span class="p">=</span>
    <span class="p">|</span> <span class="nc">FilterChanged</span> <span class="k">of</span> <span class="nc">BrowseFilterModel</span>
    <span class="p">|</span> <span class="nc">LoadNextPage</span> <span class="k">of</span> <span class="nc">BrowseFilterModel</span>
    <span class="p">|</span> <span class="nc">LoadPreviousPage</span> <span class="k">of</span> <span class="nc">BrowseFilterModel</span></code></pre></figure>

<p>I then extended the Client <code class="language-plaintext highlighter-rouge">Msg</code> type like:</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">type</span> <span class="nc">Msg</span> <span class="p">=</span>
    <span class="p">|</span> <span class="nc">GotTodos</span> <span class="k">of</span> <span class="nc">Todo</span> <span class="kt">list</span>
    <span class="p">|</span> <span class="nc">SetInput</span> <span class="k">of</span> <span class="kt">string</span>
    <span class="p">|</span> <span class="nc">AddTodo</span>
    <span class="p">|</span> <span class="nc">AddedTodo</span> <span class="k">of</span> <span class="nc">Todo</span>
    <span class="p">|</span> <span class="nc">ReceivedLocationDetail</span> <span class="k">of</span> <span class="nc">LocationDetailModel</span>
    <span class="p">|</span> <span class="nc">BrowsePageFilterChanged</span> <span class="k">of</span> <span class="nc">BrowsePageFilterChange</span>
    <span class="p">|</span> <span class="nc">ReceivedBrowsePageResult</span> <span class="k">of</span> <span class="nc">BrowsePageModel</span></code></pre></figure>

<p>I then updated the update method on the Client <code class="language-plaintext highlighter-rouge">Index</code>.</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">let</span> <span class="n">update</span> <span class="p">(</span><span class="n">msg</span><span class="p">:</span> <span class="nc">Msg</span><span class="p">)</span> <span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="nc">Model</span><span class="p">)</span> <span class="p">:</span> <span class="nc">Model</span> <span class="p">*</span> <span class="nc">Cmd</span><span class="p">&lt;</span><span class="nc">Msg</span><span class="p">&gt;</span> <span class="p">=</span>
    <span class="k">match</span> <span class="n">msg</span> <span class="k">with</span>
    <span class="p">|</span> <span class="nc">ReceivedLocationDetail</span> <span class="n">d</span> <span class="p">-&gt;</span> <span class="n">modelWithNewPageModel</span> <span class="n">model</span> <span class="p">(</span><span class="n">d</span> <span class="p">|&gt;</span> <span class="nc">ViewLocationPageModel</span><span class="o">),</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">none</span>
    <span class="p">|</span> <span class="nc">ReceivedBrowsePageResult</span> <span class="n">d</span> <span class="p">-&gt;</span>
        <span class="n">modelWithNewPageModel</span> <span class="n">model</span> <span class="p">(</span><span class="n">d</span> <span class="p">|&gt;</span> <span class="nc">BrowsePageModel</span><span class="o">),</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">none</span>
    <span class="p">|</span> <span class="nc">BrowsePageFilterChanged</span> <span class="n">d</span> <span class="p">-&gt;</span> 
        <span class="p">(</span><span class="n">model</span><span class="p">,</span>
         <span class="p">(</span><span class="nn">Cmd</span><span class="p">.</span><span class="nn">OfAsync</span><span class="p">.</span><span class="n">perform</span> <span class="n">locationInformationApi</span><span class="p">.</span><span class="n">searchLocations</span> <span class="p">(</span><span class="n">mapBrowsePageFilterChangeToLocationSearchRequsst</span> <span class="n">d</span><span class="p">)</span> <span class="n">mapSearchResultToReceievedBrowsePageResult</span><span class="o">))</span>
    <span class="p">|</span> <span class="p">_</span> <span class="p">-&gt;</span> <span class="n">model</span><span class="p">,</span> <span class="nn">Cmd</span><span class="p">.</span><span class="n">none</span></code></pre></figure>

<h2 id="results">Results</h2>

<p>Currently, the page can be viewed <a href="https://wilkens-avenue.herokuapp.com/#/browse/12312">here</a>.</p>

<p><a href="https://github.com/jamesclancy/WilkensAvenue/tree/step-10">Git branch for this step</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/recipes/2021/08/24/ThaiPlantainOvernightOats/">
        Thai Plantain Overnight Oats
      </a>
    </h1>

    <span class="post-date">24 Aug 2021</span>

    <p>Mashed Pea Spread with Garlic Hot Sauce</p>

<h2 id="ingredients">Ingredients</h2>

<ul>
  <li>1/4 cup steel cut oats</li>
  <li>1 cup soy milk</li>
  <li>1 tablespoon milled flax seed</li>
  <li>1 tablespoon baking cocoa</li>
  <li>1 tablespoon psyllium husk powder</li>
  <li>1 Thai plantain (the really small yellow plantains, very ripe/ yellow turning black) sliced</li>
  <li>1/2 banana sliced</li>
  <li>1/2 cup water</li>
</ul>

<h2 id="yield">Yield</h2>

<p>~ 1 breakfast</p>

<h2 id="process">Process</h2>

<ol>
  <li>Mix all dry ingredients</li>
  <li>Stir in banana and plantain slices</li>
  <li>Mix in soy milk</li>
  <li>Boil water and stir into mixture</li>
  <li>Place contents in container and chill until it thickens (over night).</li>
</ol>

<h2 id="results">Results</h2>

<p>9.5/10 - I make overnight oats everyday and this is probably the best combination I have come up with. The plantain adds a lot of depth to the texture/ flavor. It is good without the psyllium husk but the psyllium husk really pushes it over the top making it almost have a cake/ baked good texture.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/bookreviews/2021/08/23/Life/">
        Life A Natural History of the First Four Billion Years of Life on Earth by Richard Fortey
      </a>
    </h1>

    <span class="post-date">23 Aug 2021</span>

    <h2 id="thought-the-beginning-was-a-bit-of-a-bore-but-enjoyed-the-later-parts-of-the-history---710">Thought the beginning was a bit of a bore but enjoyed the later parts of the history - 7/10</h2>

<h2 id="summary">Summary</h2>

<p>The book starts with at the creation of the earth and maps out how life evolved and developed up until the formation of humanity and modern <em>recorded history</em>. The book attempts to straddle the line between popular science and academic information delivering a level of accessible detail which appears accurate but it still approachable to a non-biologist.</p>

<h2 id="my-impressions">My Impressions</h2>

<p>The book begins at the beginning of the Earth and slowly moves through history towards the modern age. Throughout the book a number of species are discussed and the general evolution and development of life is discussed in moderate detail. My background knowledge of the discussed species increases very dramatically as the book progressed making the book become more and more engaging. Especially in the pre-cambrian parts of the book I had very little background on what the discussed species were and had to repeatably looks up the species on wikipedia to understand what was being discussed. From my experiences in the American public school system I don’t think I am alone in my previous education’s focus on recent (dinosaur and post-dinosaur) biology. I think it would have made for a much better reading experience if simpler examples or greater detail were embedded in the earlier parts of the book to prevent this wikipedia back and forth.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/projects/wilkensavenue/2021/08/22/WilkensAvenueStep9FelizBulmaInvestigationPart1/">
        Wilkens Avenue - Step 9 - Investigate why test is failing to start
      </a>
    </h1>

    <span class="post-date">22 Aug 2021</span>

    <h2 id="goals-of-this-step">Goals of this Step</h2>
<ul>
  <li>get npm test to work</li>
</ul>

<h2 id="process">Process</h2>

<p>I spend an extensive amount of time trying to troubleshoot this. I believe the issue is <code class="language-plaintext highlighter-rouge">"@creativebulma/bulma-tagsinput"</code> is incorrectly registering its dependencies on react causing mocha to blow up.</p>

<p>In my research it looks like the proper thing to do is to update the library. I do not think this is possible. While looking into this I migrated all the html to utilize Feliz and refactored some of the html.</p>

<p>I will have to continue investigating this issues but since it appears to only effect mocha (webpack must be doing something to correct) I am pushing the migration to Feliz up as step-9.</p>

<h2 id="results">Results</h2>

<p>Currently, the page can be viewed <a href="https://wilkens-avenue.herokuapp.com/#/browse/12312">here</a>.</p>

<p><a href="https://github.com/jamesclancy/WilkensAvenue/tree/step-9">Git branch for this step</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/projects/wilkensavenue/2021/08/21/WilkensAvenueStep8BrowsePage/">
        Wilkens Avenue - Step 8 - Start Scaffolding Page Layouts - The Browse Page
      </a>
    </h1>

    <span class="post-date">21 Aug 2021</span>

    <p>I am thinking that sketching out some layouts of the various pages from Step 3 might help scope out the domain.</p>

<h2 id="goals-of-this-step">Goals of this Step</h2>
<ul>
  <li>Sketch of BrowsePage</li>
</ul>

<h2 id="process">Process</h2>

<p>I mocked up a very basic Browse Page and came up with Filter/Search options of:</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">type</span> <span class="nc">LocationDistanceFilter</span> <span class="p">=</span>
    <span class="p">{</span> <span class="nc">MaxDistance</span><span class="p">:</span> <span class="n">decimal</span>
      <span class="nc">OriginZipCode</span><span class="p">:</span> <span class="kt">string</span> <span class="p">}</span>

<span class="k">type</span> <span class="nc">LocationSearchRequest</span> <span class="p">=</span>
    <span class="p">{</span> <span class="nc">CurrentPage</span><span class="p">:</span> <span class="kt">int</span>
      <span class="nc">ItemsPerPage</span><span class="p">:</span> <span class="kt">int</span>
      <span class="nc">Query</span><span class="p">:</span> <span class="kt">string</span>

      <span class="nc">FilterToFree</span><span class="p">:</span> <span class="kt">bool</span>
      <span class="nc">FilterToOpenAir</span><span class="p">:</span> <span class="kt">bool</span>
      <span class="nc">FilterToPrivate</span><span class="p">:</span> <span class="kt">bool</span>

      <span class="nc">NeighborhoodFilter</span><span class="p">:</span> <span class="kt">string</span> <span class="kt">list</span> <span class="n">option</span>
      <span class="nc">TagFilterFilter</span><span class="p">:</span> <span class="kt">string</span> <span class="kt">list</span> <span class="n">option</span>
      <span class="nc">CategoryFilter</span><span class="p">:</span> <span class="kt">string</span> <span class="kt">list</span> <span class="n">option</span>
      <span class="nc">DistanceFilter</span><span class="p">:</span> <span class="nc">LocationDistanceFilter</span> <span class="n">option</span> <span class="p">}</span></code></pre></figure>

<p>And displaying a list of:</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">type</span> <span class="nc">LocationSummaryViewModel</span> <span class="p">=</span>
    <span class="p">{</span> <span class="nc">Id</span><span class="p">:</span> <span class="kt">string</span>
      <span class="nc">NeighborhoodId</span><span class="p">:</span> <span class="kt">string</span>
      <span class="nc">Neighborhood</span><span class="p">:</span> <span class="kt">string</span>
      <span class="nc">Name</span><span class="p">:</span> <span class="kt">string</span>
      <span class="nc">SubTitle</span><span class="p">:</span> <span class="kt">string</span>

      <span class="nc">Summary</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>

      <span class="nc">Address</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="nc">AddressDetailModel</span><span class="p">&gt;</span>

      <span class="nc">ThumbnailUrl</span><span class="p">:</span> <span class="kt">string</span>
      <span class="nc">ThumbnailHeight</span><span class="p">:</span> <span class="kt">int</span>
      <span class="nc">ThumbnailWidth</span><span class="p">:</span> <span class="kt">int</span> <span class="p">}</span></code></pre></figure>

<p>This will be returned from the API in a container:</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">type</span> <span class="nc">LocationSummaryViewModel</span> <span class="p">=</span>
    <span class="p">{</span> <span class="nc">Id</span><span class="p">:</span> <span class="kt">string</span>
      <span class="nc">NeighborhoodId</span><span class="p">:</span> <span class="kt">string</span>
      <span class="nc">Neighborhood</span><span class="p">:</span> <span class="kt">string</span>
      <span class="nc">Name</span><span class="p">:</span> <span class="kt">string</span>
      <span class="nc">SubTitle</span><span class="p">:</span> <span class="kt">string</span>

      <span class="nc">Summary</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>

      <span class="nc">Address</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="nc">AddressDetailModel</span><span class="p">&gt;</span>

      <span class="nc">ThumbnailUrl</span><span class="p">:</span> <span class="kt">string</span>
      <span class="nc">ThumbnailHeight</span><span class="p">:</span> <span class="kt">int</span>
      <span class="nc">ThumbnailWidth</span><span class="p">:</span> <span class="kt">int</span> <span class="p">}</span></code></pre></figure>

<p>It looks like there is an issue with referencing the <code class="language-plaintext highlighter-rouge">Feliz.Bulma.TagsInput</code> library which was introduced in this PR. The application appears to still work fine but the tests are failing and react throws  <code class="language-plaintext highlighter-rouge">Invalid hook call. Hooks can only be called inside of the body of a function component.</code> I believe this may be a mismatched version of react referenced in the library? The application still appears to work so I am pushing it up and merging for now. I will have a spend some time investigating the cause of this.</p>

<h2 id="results">Results</h2>

<p>Currently, the page can be viewed <a href="https://wilkens-avenue.herokuapp.com/#/browse/12312">here</a>.</p>

<p><a href="https://github.com/jamesclancy/WilkensAvenue/tree/step-8">Git branch for this step</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/projects/wilkensavenue/2021/08/16/WilkensAvenueStep7FixCiBuild/">
        Wilkens Avenue - Step 7 - Fixing the CI Build
      </a>
    </h1>

    <span class="post-date">16 Aug 2021</span>

    <p>Locally, dotnet run bundle was working but on the CI it was failing on build.</p>

<h2 id="goals-of-this-step">Goals of this Step</h2>
<ul>
  <li>Fix CI Build</li>
</ul>

<h2 id="process">Process</h2>

<p>It appears that the previous npm installs from the last step did not properly set up the packages/ packages.lock.</p>

<p>I reran</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install react@17.0.2 --save
npm install react-dom@17.0.2 --save
npm install bulma@0.9.3 --save
npm install bulma-pageloader@2.1.0 --save

npm i 
</code></pre></div></div>

<p>Pushing that up the build now works.</p>

<p><a href="https://github.com/jamesclancy/WilkensAvenue/tree/step-6">Git branch for this step</a></p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page10">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page8">Newer</a>
    
  
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='/public/js/script.js'></script>
  </body>
</html>
