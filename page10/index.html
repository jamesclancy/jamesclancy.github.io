<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      James Clancy &middot; This needs to be reorganized in the future.
    
  </title>

  
  <link rel="canonical" href="/page10/">
  

  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6FZ90LRCT8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6FZ90LRCT8');
    </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Largely a mess of content. The idea is to generate content then refine sometime in the future.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item active" href="/">Home</a>
    








  
  
  

  
    

    

    
    

        

        
        <a class="sidebar-nav-item" href="/categories/bookreviews/">
          BookReviews
          (<span class="text-muted small font-weight-light">
              77
              
          </span>)
        </a>

        <!-- content count -->


    


    

  

  
  
  

  
    

    

    
    

        

        
        <a class="sidebar-nav-item" href="/categories/general/">
          General
          (<span class="text-muted small font-weight-light">
              2
              
          </span>)
        </a>

        <!-- content count -->


    


    

  

  
  
  

  

  
  
  

  
    

    

    
    

        

        
        <a class="sidebar-nav-item" href="/categories/projects/">
          Projects
          (<span class="text-muted small font-weight-light">
              38
              
          </span>)
        </a>

        <!-- content count -->


    
        
          
          
          <a class="sidebar-nav-item" 
              href="/categories/kafkaui/" style="padding-left:60px;">KafkaUI (<span class="text-muted small font-weight-light">
                1
                
              </span>)</a>

          
        
          
          
          <a class="sidebar-nav-item" 
              href="/categories/safecardgame/" style="padding-left:60px;">SafeCardGame (<span class="text-muted small font-weight-light">
                17
                
              </span>)</a>

          
        
          
          
          <a class="sidebar-nav-item" 
              href="/categories/wilkensavenue/" style="padding-left:60px;">WilkensAvenue (<span class="text-muted small font-weight-light">
                20
                
              </span>)</a>

          
        
    


    

  

  
  
  

  
    

    

    
    

        

        
        <a class="sidebar-nav-item" href="/categories/recipes/">
          Recipes
          (<span class="text-muted small font-weight-light">
              16
              
          </span>)
        </a>

        <!-- content count -->


    


    

  

  
  
  

  

  
  
  

  




  </nav>


<div class="sidebar-item">
  <p>
<a href="/about">About</a> | 
<a href="https://github.com/jamesclancy" aria-label="github" target="_blank" rel="noopener"> 
  <i class="fab fa-github-alt"></i> Github </a> | 
<a href="/feed.xml" aria-label="rss"> <i class="fas fa-rss"></i> RSS </a>
    </p>
    <p>
      &copy; 2022. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">James Clancy</a>
            <small>This needs to be reorganized in the future.</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/projects/wilkensavenue/2021/08/16/WilkensAvenueStep6AddLoadingScreen-copy/">
        Wilkens Avenue - Step 6 - Add a loading screen for when waiting for network calls to complete
      </a>
    </h1>

    <span class="post-date">16 Aug 2021</span>

    <p>After working on Step 5 and starting building out one of the pages I noticed that when you initially load an api response reliant page it loads the home page first and then changes pages. This is not an ideal user experience. To help improve this I am adding a loading screen to display as the api information is fetched over the network.</p>

<h2 id="goals-of-this-step">Goals of this Step</h2>
<ul>
  <li>Added loading screen</li>
  <li>On load the the the init state of the app is pointing to the loading screen.</li>
  <li>When waiting for the location detail screen it should show the loading screen</li>
</ul>

<h2 id="process">Process</h2>

<p>Per https://fulma.github.io/Fulma/#fulma-extensions/pageloader</p>

<p>I ran</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>paket add Fulma.Extensions.Wikiki.PageLoader --project .\src\Client\Client.fsproj
dotnet tool install femto
dotnet femto .\src\Client\Client.fsproj
</code></pre></div></div>

<p>Then I followed the provided instructions running</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm uninstall react
npm install react@17.0.2 --save
npm uninstall react-dom
npm install react-dom@17.0.2 --save
npm install bulma@0.9.3 --save
npm install bulma-pageloader@2.1.0 --save
</code></pre></div></div>

<p>Additionally, (and not documented anywhere I saw) I had to add a reference to the CSS package for the bulma loader. to do this I added <code class="language-plaintext highlighter-rouge">&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-pageloader@0.3.0/dist/css/bulma-pageloader.min.css" /&gt;</code> to my index.html.</p>

<h2 id="results">Results</h2>

<p>Currently, the page can be viewed <a href="https://wilkens-avenue.herokuapp.com/#/viewlocation/sdf">here</a>.</p>

<p><a href="https://github.com/jamesclancy/WilkensAvenue/tree/step-6">Git branch for this step</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/projects/wilkensavenue/2021/08/15/WilkensAvenueStep5StartScaffoldingPageLayouts/">
        Wilkens Avenue - Step 5 - Start Scaffolding Page Layouts
      </a>
    </h1>

    <span class="post-date">15 Aug 2021</span>

    <p>I am thinking that sketching out some layouts of the various pages from Step 3 might help scope out the domain.</p>

<h2 id="goals-of-this-step">Goals of this Step</h2>
<ul>
  <li>Sketch of ViewLocation</li>
</ul>

<h2 id="process">Process</h2>

<p>First I pulled out the navBar into a separate <code class="language-plaintext highlighter-rouge">SharedComponents</code> module.</p>

<p>I eventually pulled out a number of view components and outlined the general view model and view for the “View Location” page. It doesn’t look very good and returns static information from wikipedia but I think it illustrates the needed information.</p>

<p>The location detail view turned out like:</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">let</span> <span class="n">locationDetailView</span> <span class="n">model</span> <span class="p">(</span><span class="n">dispatch</span><span class="p">:</span> <span class="nc">Msg</span> <span class="p">-&gt;</span> <span class="kt">unit</span><span class="p">)</span> <span class="p">=</span>

    <span class="k">let</span> <span class="n">addressSection</span> <span class="p">(</span><span class="n">address</span> <span class="p">:</span> <span class="nc">AddressDetailModel</span> <span class="n">option</span><span class="p">)</span> <span class="p">=</span>

        <span class="k">let</span> <span class="n">tryReturnString</span> <span class="n">optStr</span> <span class="p">=</span>
            <span class="k">match</span> <span class="n">optStr</span> <span class="k">with</span>
            <span class="p">|</span> <span class="nc">None</span> <span class="p">-&gt;</span> <span class="nn">Seq</span><span class="p">.</span><span class="n">empty</span>
            <span class="p">|</span> <span class="nc">Some</span> <span class="n">s</span> <span class="p">-&gt;</span> <span class="n">seq</span> <span class="p">{</span> <span class="k">yield</span> <span class="n">str</span> <span class="n">s</span> <span class="p">}</span>

        <span class="k">match</span> <span class="n">address</span> <span class="k">with</span>
        <span class="p">|</span> <span class="nc">None</span> <span class="p">-&gt;</span> <span class="nn">Seq</span><span class="p">.</span><span class="n">empty</span>
        <span class="p">|</span> <span class="nc">Some</span> <span class="n">a</span> <span class="p">-&gt;</span> <span class="n">seq</span> <span class="p">{</span> <span class="k">yield</span> <span class="n">section</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"section"</span> <span class="p">]</span>
                                <span class="p">[</span>
                                    <span class="n">h1</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"title"</span> <span class="p">]</span> <span class="p">[</span> <span class="n">str</span> <span class="s2">"Location"</span> <span class="p">]</span>
                                    <span class="n">p</span> <span class="bp">[]</span> <span class="p">[</span>
                                            <span class="k">yield</span><span class="o">!</span> <span class="n">tryReturnString</span> <span class="n">a</span><span class="p">.</span><span class="nc">Address1</span>
                                            <span class="k">yield</span><span class="o">!</span> <span class="n">tryReturnString</span> <span class="n">a</span><span class="p">.</span><span class="nc">Address2</span>
                                            <span class="k">yield</span><span class="o">!</span> <span class="n">tryReturnString</span> <span class="n">a</span><span class="p">.</span><span class="nc">Address3</span>
                                            <span class="k">yield</span><span class="o">!</span> <span class="n">tryReturnString</span> <span class="n">a</span><span class="p">.</span><span class="nc">City</span>
                                            <span class="k">yield</span><span class="o">!</span> <span class="n">tryReturnString</span> <span class="n">a</span><span class="p">.</span><span class="nc">State</span>
                                            <span class="k">yield</span><span class="o">!</span> <span class="n">tryReturnString</span> <span class="n">a</span><span class="p">.</span><span class="nc">Zipcode</span>

                                            <span class="k">yield</span> <span class="n">str</span> <span class="p">(</span><span class="n">sprintf</span> <span class="s2">"Latitude: %f"</span> <span class="n">a</span><span class="p">.</span><span class="nc">Latitude</span><span class="p">)</span>
                                            <span class="k">yield</span> <span class="n">str</span> <span class="p">(</span><span class="n">sprintf</span> <span class="s2">"Longitude: %f"</span> <span class="n">a</span><span class="p">.</span><span class="nc">Longitude</span><span class="p">)</span>
                                         <span class="p">]</span>
                                    <span class="p">]</span> <span class="p">}</span>
            
    <span class="k">let</span> <span class="n">displayImages</span> <span class="n">images</span> <span class="p">=</span>
        <span class="k">match</span> <span class="n">images</span> <span class="k">with</span>
        <span class="p">|</span> <span class="nc">None</span> <span class="p">-&gt;</span> <span class="nn">Seq</span><span class="p">.</span><span class="n">empty</span>
        <span class="p">|</span> <span class="nc">Some</span> <span class="n">x</span> <span class="p">-&gt;</span>
            <span class="n">seq</span> <span class="p">{</span> <span class="k">yield</span> <span class="n">section</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"section"</span> <span class="p">]</span>
                        <span class="p">[</span>
                            <span class="k">yield</span> <span class="n">h1</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"title"</span> <span class="p">]</span> <span class="p">[</span> <span class="n">str</span> <span class="s2">"Images"</span> <span class="p">]</span>
                            <span class="k">yield</span><span class="o">!</span> <span class="n">buildListOfThumbnails</span> <span class="n">x</span>
                            <span class="k">yield</span> <span class="n">str</span> <span class="s2">"Upload your own photos!"</span>
                            <span class="p">]</span>  <span class="p">}</span>

    <span class="n">section</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"section pt-0 is-relative"</span> <span class="p">]</span>
      <span class="p">[</span>
        <span class="k">yield</span><span class="o">!</span> <span class="p">(</span><span class="n">leftHalfPageImageRotation</span> <span class="n">model</span><span class="p">.</span><span class="nc">Images</span><span class="p">)</span>
        <span class="p">(</span><span class="n">navBar</span> <span class="n">dispatch</span><span class="p">)</span>
        <span class="n">div</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"container"</span> <span class="p">]</span>
              <span class="p">[</span> <span class="n">div</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"pt-5 columns is-multiline"</span> <span class="p">]</span>
                  <span class="p">[</span> <span class="n">div</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"column is-12 is-5-desktop ml-auto"</span> <span class="p">]</span>
                      <span class="p">[</span> <span class="n">div</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"mb-5"</span> <span class="p">]</span>
                          <span class="p">[</span> <span class="n">h2</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"mb-5 is-size-1 is-size-3-mobile has-text-weight-bold"</span> <span class="p">]</span>
                              <span class="p">[</span> <span class="n">str</span> <span class="n">model</span><span class="p">.</span><span class="nc">Name</span> <span class="p">]</span>
                            <span class="n">p</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"subtitle has-text-grey mb-5"</span> <span class="p">]</span>
                              <span class="p">[</span> <span class="n">str</span> <span class="n">model</span><span class="p">.</span><span class="nc">SubTitle</span> <span class="p">]</span>
                            <span class="k">yield</span><span class="o">!</span> <span class="n">sectionOrYieldNothing</span> <span class="s2">""</span> <span class="s2">"Summary"</span> <span class="n">model</span><span class="p">.</span><span class="nc">Summary</span>
                            <span class="k">yield</span><span class="o">!</span> <span class="n">sectionOrYieldNothing</span> <span class="s2">""</span> <span class="s2">"Description"</span> <span class="n">model</span><span class="p">.</span><span class="nc">Description</span>
                            <span class="k">yield</span><span class="o">!</span> <span class="n">addressSection</span> <span class="n">model</span><span class="p">.</span><span class="nc">Address</span>
                            <span class="k">yield</span><span class="o">!</span> <span class="n">displayImages</span> <span class="n">model</span><span class="p">.</span><span class="nc">Images</span>
                            <span class="k">yield</span><span class="o">!</span> <span class="n">modifyTextInParagraphOrYieldNothing</span> <span class="s2">"has-text-grey mb-5"</span> <span class="p">(</span><span class="k">fun</span> <span class="n">x</span> <span class="p">-&gt;</span> <span class="s2">"Description from: "</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span> <span class="n">model</span><span class="p">.</span><span class="nc">DescriptionCitation</span>
                            <span class="n">div</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"buttons"</span> <span class="p">]</span>
                              <span class="p">[</span> <span class="n">a</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"button is-primary"</span>
                                    <span class="nc">Href</span> <span class="s2">"https://github.com/jamesclancy/WilkensAvenue"</span> <span class="p">]</span>
                                  <span class="p">[</span> <span class="n">str</span> <span class="s2">"Directions"</span> <span class="p">]</span>
                                <span class="n">a</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"button is-primary"</span>
                                    <span class="nc">Href</span> <span class="s2">"https://github.com/jamesclancy/WilkensAvenue"</span> <span class="p">]</span>
                                  <span class="p">[</span> <span class="n">str</span> <span class="s2">"Upload Images"</span> <span class="p">]</span>
                                <span class="n">a</span> <span class="p">[</span> <span class="nc">Class</span> <span class="s2">"button is-primary"</span>
                                    <span class="nc">Href</span> <span class="s2">"https://github.com/jamesclancy/WilkensAvenue"</span> <span class="p">]</span>
                                  <span class="p">[</span> <span class="n">str</span> <span class="s2">"Submit Update to Description"</span> <span class="p">]</span>
                                  <span class="p">]</span> <span class="p">]</span> <span class="p">]</span> <span class="p">]</span> <span class="p">]</span> <span class="p">]</span></code></pre></figure>

<p>With a view model like:</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">type</span> <span class="nc">AddressDetailModel</span> <span class="p">=</span>
    <span class="p">{</span>
         <span class="nc">Address1</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>
         <span class="nc">Address2</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>
         <span class="nc">Address3</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>
         <span class="nc">City</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>
         <span class="nc">State</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>
         <span class="nc">Zipcode</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>

         <span class="nc">Longitude</span><span class="p">:</span> <span class="n">decimal</span>
         <span class="nc">Latitude</span><span class="p">:</span> <span class="n">decimal</span>  
    <span class="p">}</span>

<span class="k">type</span> <span class="nc">DetailImageModel</span> <span class="p">=</span>
    <span class="p">{</span>
        <span class="nc">Id</span><span class="p">:</span> <span class="kt">string</span>
        <span class="nc">Name</span><span class="p">:</span> <span class="kt">string</span>

        <span class="nc">Order</span><span class="p">:</span> <span class="kt">int</span>

        <span class="nc">IsCurrentlySelected</span><span class="p">:</span> <span class="kt">bool</span>

        <span class="nc">FullSizeUrl</span><span class="p">:</span> <span class="kt">string</span>
        <span class="nc">ThumbnailUrl</span><span class="p">:</span> <span class="kt">string</span>

        <span class="nc">FullSizeHeight</span><span class="p">:</span> <span class="kt">int</span>
        <span class="nc">FullSizeWidth</span><span class="p">:</span> <span class="kt">int</span>
        <span class="nc">ThumbnailHeight</span><span class="p">:</span> <span class="kt">int</span>
        <span class="nc">ThumbnailWidth</span><span class="p">:</span> <span class="kt">int</span>

        <span class="nc">Author</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>
        <span class="nc">Description</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>
        <span class="nc">Copyright</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>
        <span class="nc">MoreInforamtionLink</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>


        <span class="nc">IsOwnedByCurrentUser</span><span class="p">:</span> <span class="kt">bool</span>
        <span class="nc">SubmissionDate</span><span class="p">:</span> <span class="nc">DateTimeOffset</span>
        <span class="nc">Submitter</span><span class="p">:</span> <span class="kt">string</span>
        <span class="nc">SubmitterId</span><span class="p">:</span> <span class="kt">string</span>
    <span class="p">}</span>

<span class="k">type</span> <span class="nc">LocationDetailModel</span> <span class="p">=</span>
    <span class="p">{</span>
        <span class="nc">Id</span><span class="p">:</span> <span class="kt">string</span>
        <span class="nc">Name</span><span class="p">:</span> <span class="kt">string</span>
        <span class="nc">SubTitle</span><span class="p">:</span> <span class="kt">string</span>

        <span class="nc">Summary</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>
        <span class="nc">Description</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>
        <span class="nc">DescriptionCitation</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>

        <span class="nc">Address</span><span class="p">:</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="nc">AddressDetailModel</span><span class="p">&gt;</span>

        <span class="nc">Images</span><span class="p">:</span> <span class="nc">DetailImageModel</span> <span class="kt">list</span> <span class="n">option</span>
    <span class="p">}</span>  </code></pre></figure>

<h2 id="results">Results</h2>

<p>Currently, the page can be viewed <a href="https://wilkens-avenue.herokuapp.com/#/viewlocation/sdf">here</a>.</p>

<p><a href="https://github.com/jamesclancy/WilkensAvenue/tree/step-5">Git branch for this step</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/projects/wilkensavenue/2021/08/15/WilkensAvenueStep4AddOktaLoginSupport/">
        Wilkens Avenue - Step 4 - Add Okta Support for Login
      </a>
    </h1>

    <span class="post-date">15 Aug 2021</span>

    <p>I previously used Github OAuth to authenticate the SafeCardGame, I wanted to try using Okta.</p>

<h2 id="goals-of-this-step">Goals of this Step</h2>
<ul>
  <li>Create Okta account</li>
  <li>Create way to read secret keys/environmental variables with Okta api keys</li>
  <li>Add Okta configuration and a route which requires login.</li>
</ul>

<h2 id="results">Results</h2>

<p>This appeared to be very straightforward, unfortunately I was unable to find a way to cleanly pull the configuration from the service configuration in the Saturn provided <code class="language-plaintext highlighter-rouge">use_open_id_auth_with_config</code>. All examples I could find were pulling from static methods and not from the service configuration. While this may be the <em>functional way</em>, I did want to be able to utilize the Microsoft supplied <code class="language-plaintext highlighter-rouge">AddUserSecrets</code> and <code class="language-plaintext highlighter-rouge">AddEnvironmentVariables</code> which register values in the <code class="language-plaintext highlighter-rouge">IConfiguration</code> in the service configuration.</p>

<p>Therefor, I had to implement my own <code class="language-plaintext highlighter-rouge">use_open_id_auth_with_config_from_service_collection</code>. To do this I essentially copy and pasted the original <a href="https://github.com/SaturnFramework/Saturn/blob/9593e90e1397309c4653abe703478893b60daa5e/src/Saturn.Extensions.Authorization/OAuth.fs#L189"><code class="language-plaintext highlighter-rouge">use_open_id_auth_with_config</code></a> and modified it to accept a function with maps from a IServiceCollection to the required confuration like so:</p>

<figure class="highlight"><pre><code class="language-fsharp" data-lang="fsharp"><span class="k">type</span> <span class="nn">Saturn</span><span class="p">.</span><span class="nn">Application</span><span class="p">.</span><span class="nc">ApplicationBuilder</span> <span class="k">with</span>
    <span class="p">[&lt;</span><span class="nc">CustomOperation</span><span class="p">(</span><span class="s2">"use_open_id_auth_with_config_from_service_collection"</span><span class="o">)&gt;]</span>
    <span class="k">member</span> <span class="o">__.</span><span class="nc">UseOpenIdAuthWithConfigFromServiceCollection</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="nc">ApplicationState</span><span class="p">,</span> <span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="nc">IServiceCollection</span> <span class="p">-&gt;</span> <span class="nc">Action</span><span class="p">&lt;</span><span class="nn">OpenIdConnect</span><span class="p">.</span><span class="nc">OpenIdConnectOptions</span><span class="o">&gt;))</span> <span class="p">=</span>
        <span class="k">let</span> <span class="n">middleware</span> <span class="p">(</span><span class="n">app</span> <span class="p">:</span> <span class="nc">IApplicationBuilder</span><span class="p">)</span> <span class="p">=</span>
            <span class="n">app</span><span class="p">.</span><span class="nc">UseAuthentication</span><span class="bp">()</span>

        <span class="k">let</span> <span class="n">service</span> <span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nc">IServiceCollection</span><span class="p">)</span> <span class="p">=</span>
            <span class="k">let</span> <span class="n">authBuilder</span> <span class="p">=</span> <span class="n">s</span><span class="p">.</span><span class="nc">AddAuthentication</span><span class="p">(</span><span class="k">fun</span> <span class="n">authConfig</span> <span class="p">-&gt;</span>
                <span class="n">authConfig</span><span class="p">.</span><span class="nc">DefaultScheme</span> <span class="p">&lt;-</span> <span class="nn">CookieAuthenticationDefaults</span><span class="p">.</span><span class="nc">AuthenticationScheme</span>
                <span class="n">authConfig</span><span class="p">.</span><span class="nc">DefaultChallengeScheme</span> <span class="p">&lt;-</span> <span class="nn">OpenIdConnectDefaults</span><span class="p">.</span><span class="nc">AuthenticationScheme</span>
                <span class="n">authConfig</span><span class="p">.</span><span class="nc">DefaultSignInScheme</span> <span class="p">&lt;-</span> <span class="nn">CookieAuthenticationDefaults</span><span class="p">.</span><span class="nc">AuthenticationScheme</span><span class="p">)</span>
            <span class="k">if</span> <span class="k">not</span> <span class="n">state</span><span class="p">.</span><span class="nc">CookiesAlreadyAdded</span> <span class="k">then</span> <span class="n">authBuilder</span><span class="p">.</span><span class="nc">AddCookie</span><span class="bp">()</span> <span class="p">|&gt;</span> <span class="n">ignore</span>
            <span class="n">authBuilder</span><span class="p">.</span><span class="nc">AddOpenIdConnect</span><span class="p">(</span><span class="nn">OpenIdConnectDefaults</span><span class="p">.</span><span class="nc">AuthenticationScheme</span><span class="p">,</span> <span class="p">(</span><span class="n">config</span> <span class="n">s</span><span class="o">))</span> <span class="p">|&gt;</span> <span class="n">ignore</span>
            <span class="n">s</span>

        <span class="p">{</span> <span class="n">state</span> <span class="k">with</span>
            <span class="nc">ServicesConfig</span> <span class="p">=</span> <span class="n">service</span><span class="p">::</span><span class="n">state</span><span class="p">.</span><span class="nc">ServicesConfig</span>
            <span class="nc">AppConfigs</span> <span class="p">=</span> <span class="n">middleware</span><span class="p">::</span><span class="n">state</span><span class="p">.</span><span class="nc">AppConfigs</span>
            <span class="nc">CookiesAlreadyAdded</span> <span class="p">=</span> <span class="bp">true</span> <span class="p">}</span></code></pre></figure>

<p><a href="https://github.com/jamesclancy/WilkensAvenue/tree/step-4">Git branch for this step</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/recipes/2021/08/14/MashedPeasAndGarlicHotSauce/">
        Mashed Pea Spread with Garlic Hot Sauce
      </a>
    </h1>

    <span class="post-date">14 Aug 2021</span>

    <p>Mashed Pea Spread with Garlic Hot Sauce</p>

<h2 id="ingredients">Ingredients</h2>

<ul>
  <li>1 can sweet peas (drained)</li>
  <li>1 can diced tomatoes</li>
  <li>2 tablespoons <code class="language-plaintext highlighter-rouge">Garlic</code> Medium peri-peri sauce</li>
  <li>1 tablespoon chia seeds</li>
  <li>1 tablespoon mustard</li>
  <li>1 teaspoon garlic powder</li>
</ul>

<h2 id="yield">Yield</h2>

<p>~ 4 serving (~ 4 sandwiches worth of spread)</p>

<h2 id="process">Process</h2>

<ol>
  <li>Place all contents in a container</li>
  <li>Mash it all together. It should turn into a red and green mash.</li>
  <li>Place contents in container and chill until it thickens (over night).</li>
</ol>

<h2 id="results">Results</h2>

<p>7/10 - This is very edible and a good way to get rid of can peas I stocked up with at the beginning of the COVID-19 pandemic/ lock-downs. The garlic hot sauce and mustard hides the pea flavor making a generic and <code class="language-plaintext highlighter-rouge">fine</code> food product. It was especially good topped with crunchy toping to hide some of the <code class="language-plaintext highlighter-rouge">mushy pea</code> texture.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/recipes/2021/08/09/CheesyNavyBeanAndChickpeaSpread/">
        Cheesy Navy Bean & Chickpea Spread
      </a>
    </h1>

    <span class="post-date">09 Aug 2021</span>

    <p>Creamy spread given a cheesy flavor with nutritional yeast</p>

<h2 id="ingredients">Ingredients</h2>

<ul>
  <li>1 can navy beans</li>
  <li>1 can chickpeas</li>
  <li>2 can diced tomatoes</li>
  <li>4 teaspoons nutritional yeast</li>
  <li>2 teaspoons chia seeds</li>
  <li>2 teaspoons milled flax seed</li>
  <li>1 teaspoon onion powder</li>
  <li>1 teaspoon garlic powder</li>
  <li>1 teaspoon smoked paprika</li>
</ul>

<h2 id="yield">Yield</h2>

<p>~ 8 serving (~ 8 sandwiches worth of spread)</p>

<h2 id="process">Process</h2>

<ol>
  <li>Place all contents in a food processor</li>
  <li>Pulverize in food processor until smooth</li>
  <li>Place contents in container and chill until it thickens.</li>
</ol>

<h2 id="results">Results</h2>

<p>9/10 - This is a large improvement over the previous cheesy like spread I have made. The flax and the chia really adds a nice nutty flavor and thickens the spread a lot.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/bookreviews/2021/08/09/Arithmetic/">
        Arithmetic by Paul Lockhart
      </a>
    </h1>

    <span class="post-date">09 Aug 2021</span>

    <h2 id="amazing-book-about-the-history-and-art-of-counting---1010">Amazing book about the history and art of counting - 10/10</h2>

<h2 id="summary">Summary</h2>

<p>The book discusses the role of Arithmetic and counting through history. Largely the book’s focus isn’t to teach the reader how to do elementary arithmetic but rather to highlight the beauty of the patterns we can find in numbers and how those enable us to perform tasks better.</p>

<h2 id="my-impressions">My Impressions</h2>

<p>I found this to be one of the more approachable and better mathematics related books I have read and I will recommend it to anyone, even those without a math background. The author took advantage of the simplicity of the arithmetic domain to focus on the underlying art of finding and utilizing patterns around us without getting bogged down in any in depth technical discussions or details.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/projects/wilkensavenue/2021/08/08/WilkensAvenueStep3InititalPagesAndRouting/">
        Wilkens Avenue - Step 3 - Outline Basic Pages & Client Routing
      </a>
    </h1>

    <span class="post-date">08 Aug 2021</span>

    <p>Need to scope out and set up the initial pages for the first stage of the project. I will also set up the routing to these pages.</p>

<p>Initially at least, the site is going to be a SPA and not play nicely with SEO. This is largely fine as the project isn’t truly a production site meant for general consumption.</p>

<h2 id="goals-of-this-step">Goals of this Step</h2>
<ul>
  <li>Scope a list of pages</li>
  <li>Create Elmish routes to said pages</li>
</ul>

<h2 id="results">Results</h2>

<h3 id="list-of-normal-pages">List of normal pages</h3>
<ul>
  <li>Home</li>
  <li>Find</li>
  <li>Browse</li>
  <li>AddLocation</li>
  <li>YourLocations</li>
  <li>Login</li>
  <li>Register</li>
  <li>Logout</li>
  <li>YourAccount</li>
  <li>EditLocation</li>
  <li>ViewLocation</li>
  <li>About</li>
</ul>

<h3 id="pages-without-routes">Pages without routes</h3>
<ul>
  <li>Not Found</li>
  <li>Unauthorized</li>
</ul>

<h3 id="implementation-details--notes">Implementation Details &amp; Notes</h3>

<p>Looking through the <a href="https://elmish.github.io/browser/routing.html">Elmish documentation</a> this was quite simple. The call-out about tuples on that page was helpful, when creating the “Find” route I had to pass a lambda i.e. <code class="language-plaintext highlighter-rouge">map (fun x y z -&gt; (x, y, z) |&gt; Find) (s "Find" &lt;/&gt; str &lt;/&gt; str &lt;/&gt; i32)</code>.</p>

<p>In addition to setting up the routing itself, I also extended the <code class="language-plaintext highlighter-rouge">Model</code> to become a discriminated union holding different typed models for each page.</p>

<p>One thing that did cause some confusion was that the Elmish parser is case sensitive.</p>

<p><a href="https://github.com/jamesclancy/WilkensAvenue/tree/step-3">Git branch for this step</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/projects/wilkensavenue/2021/08/07/WilkensAvenueStep2CI/">
        Wilkens Avenue - Step 2 - Add CI Test Runner
      </a>
    </h1>

    <span class="post-date">07 Aug 2021</span>

    <p>Unlike what I did during the development of the SafeCardGame, I am going to prioritize tests when creating this project. In order to better facilitate this I am going to create a github action to automatically run tests on PRs to master.</p>

<h2 id="goals-of-this-step">Goals of this Step</h2>
<ul>
  <li>Add github action to build project and run all server and client tests when a PR is created to master.</li>
</ul>

<h2 id="issues-encountered">Issues encountered</h2>
<p>By default the client tests in the safe template run in a headed web browser. This was problematic from a action standpoint. I end ups have to spend a good amount of time to googling about it. I eventually looked read the <a href="https://github.com/Zaid-Ajaj/Fable.Mocha#running-the-tests-on-nodejs-with-mocha">mocha documentation</a>.</p>

<p>Installing mocha &amp; fable-splitter to npm and adding the</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"pretest": "fable-splitter tests/Client -o nodetests/ --commonjs",
"test": "mocha nodetests"
</code></pre></div></div>

<p>to the package.json allowed me to add an action running <code class="language-plaintext highlighter-rouge">npm run test</code> to test the client.</p>

<p>This ran locally but not inside the action. I also had to add the <code class="language-plaintext highlighter-rouge">fable-compiler</code> in the packages. I am assuming I must have the fable-compiler installed globally on my local box but it obviously isn’t on the action runner.</p>

<p><a href="https://github.com/jamesclancy/WilkensAvenue/tree/step-2">Git branch for this step</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/recipes/2021/08/02/QuickPickledChayote/">
        Quick Pickled Chayote
      </a>
    </h1>

    <span class="post-date">02 Aug 2021</span>

    <p>Basic Quick Pickled Chayote made from harvested pears and random things I had in my kitchen.</p>

<h2 id="ingredients">Ingredients</h2>

<ul>
  <li>3 medium chayote</li>
  <li>2 teaspoons pepper</li>
  <li>2 teaspoons onion powder</li>
  <li>2 teaspoons garlic powder</li>
  <li>apple cider vinegar</li>
</ul>

<h2 id="yield">Yield</h2>

<p>~ 2 quart sized mason jars full</p>

<h2 id="process">Process</h2>

<ol>
  <li>Chopped chayote into cubes and placed in packed into mason jars.</li>
  <li>Added the spices to the containers throughout and filled the majority of the jars with apple cider vinegar.</li>
  <li>Microwaved the jars for 5 min until boiling.</li>
  <li>Sealed the mason jars and place somewhere cold for two weeks.</li>
</ol>

<h2 id="results">Results</h2>

<p><em>to come, still waiting to test…</em></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/recipes/2021/08/01/PearChutney/">
        Pear Chutney
      </a>
    </h1>

    <span class="post-date">01 Aug 2021</span>

    <p>Basic Pear Chutney made from harvested pears and random things I had in my kitchen.</p>

<h2 id="ingredients">Ingredients</h2>

<ul>
  <li>16 pounds of near-ripe and ripe pears (chopped up)</li>
  <li>1.5 pounds of chopped walnuts</li>
  <li>2.5 oz of cinnamon</li>
  <li>0.5 gallons of apple-cider-vinegar</li>
  <li>0.5 lb of raisins</li>
  <li>1 tsp of onion powder</li>
</ul>

<h2 id="yield">Yield</h2>

<p>~ 14 cups of chutney</p>

<h2 id="process">Process</h2>

<p>Placed all the ingredients in a large pot and simmered until it formed a thick chutney consistency. This required stirring occasionally and took about an hour.</p>

<h2 id="results">Results</h2>

<p>8/10 - the results are very good but extremely sweet. Because of the amounts of sugar and the amount of walnuts it seems to serve as a good peanut butter and jelly replacement spread more then a traditional chutney.</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page11">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page9">Newer</a>
    
  
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='/public/js/script.js'></script>
  </body>
</html>
